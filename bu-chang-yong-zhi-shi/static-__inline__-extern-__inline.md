# static \_\_inline\_\_ / extern \_\_inline

### static \_\_inline\_\_：内联展开

inline不都是要展开的么，为什么要加static

表示**所有对函数的调用都能被展开在调用者里面**，并且这个函数的地址从来没有被使用过

**当一个inline函数不是 static时**，那么编译器必须假设其他源程序中可能存在调用。因为一个全局符号只能被定义一次，所以这个函数在其他源程序中不能被定义，于是那里的调用 不能够被展开。因此，一个**非static的inline函数**总是**同普通函数一样被编译生成**。

### extern \_\_inline\_\_：宏定义的效果

这个定义只被用来inline展开, 这个函数体的汇编代码**从来都不会被编译生成**

即使你显示引用了它的地址，显示引用的地址变成一个外部引用，就像你仅仅声明了这个函数，而没有定义它一样

所以extern 与 inline的结合达到了一个**宏定义的效果**，函数体的代码不会被编译生成

**使用方法**：**在头文件中使用这些关键字写出函数定义**，同时在**库文件中放入另一份函数体定义的拷贝**（没有 inline和extern）

在头文件中的定义将会使大部分对函数的调用被inline展开。如果存在对这个函数的使用，它们将会引用库中的单一拷贝。

