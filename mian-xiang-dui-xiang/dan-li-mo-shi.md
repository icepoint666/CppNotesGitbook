# 单例模式

### 什么是单例模式

只能创建出一个类对象（只有一实际的实例）的叫单例模式

### 单例模式的应用场景

* Windows系统的任务管理器
* Linux/Unix系统的日志系统
* 网站的访问计数器
* 服务端程序的连接池、线程池、数据池

### C++如何实现单例

1. 禁止类的外部创建类对象：构造函数设置私有 
2. 类自己维护一个唯一的实例：使用静态指针指向
3. 提供一个获取实例的方法：静态成员函数获取静态指针

#### 饿汉模式

将单例类的唯一实例对象定义为成员变量，当程序开始运行时，实例对象就已经创建完成。 

优点：加载进程时，静态创建单例对象，线程安全。 

缺点：无论使用与否，总要创建，浪费内存。

#### 懒汉模式

用静态成员指针来指向单例类的唯一实例对象，只有真正调用获取实例的静态接口时，实例对象才被创建。 

优点：什么时候用什么时候创建，节约内存。 

缺点：在第一次调用获取实例对象的静态接口时，才真正创建，如果在多线程操作情况下有可能被创建出多个实例对象（虽然可能性很低），存在线程不安全问题。



